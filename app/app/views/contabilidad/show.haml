%h1 Contabilidad
%h2 Balance
.cards.cards-table
  .pure-g
    .cards-col.pure-u-1.pure-u-lg-2-3
      .card.flush-right
        %span.big.float-left Total:
        .float-right
          %span{class: (@balance_total < 0) ? "in-red super-big" : "super-big"} #{@balance_total} €
    .cards-col.pure-u-1.pure-u-lg-1-3
      .card
        .float-left Total cobros:
        %strong.float-right #{@balance_positivo} €
      .card
        .float-left Total pagos:
        %strong.in-red.float-right #{@balance_negativo} €
%h2 Detalles

= link_to "Ordenar por fecha", {order: :date}, class: "pure-button"
= link_to "Ordenar por importe", {order: :amount}, class: "pure-button"
= link_to "Agrupar por contrato", {order: :contract}, class: "pure-button"
= link_to "Agrupar por empresa", {order: :owner}, class: "pure-button"

.pure-g
  .pure-u-1.pure-u-lg-11-24
    - if @cobros.is_a? Hash
      %h4 Suma de cobros
      .cards
        - @cobros.each do |key, suma|
          .card
            .float-left
              - if key.is_a? AnuncianteContrato
                Contrato #{key.id} (#{key.descripcion} - #{key.anunciante.nombre})
              - elsif key.is_a? Anunciante
                = key.nombre
            %strong.float-right #{suma} €
    - else
      %h4 Todos los cobros
      .cards
        - @cobros.each do |cobro|
          .card
            .float-left
              =cobro.fecha
              %span.count (Contrato #{cobro.anunciante_contrato.id} - #{cobro.anunciante_contrato.anunciante.nombre})
            %strong.float-right #{cobro.importe} €

  .pure-u-1.pure-u-lg-2-24
  .pure-u-1.pure-u-lg-11-24
    - if @pagos.is_a? Hash
      %h4 Suma de pagos
      .cards
        - @pagos.each do |key, suma|
          .card
            .float-left
              - if key.is_a? MedioContrato
                Contrato #{key.id} (#{key.descripcion} - #{key.medio.nombre})
              - elsif key.is_a? Medio
                = key.nombre
            %strong.in-red.float-right #{suma} €
    - else
      %h4 Todos los pagos
      .cards
        - @pagos.each do |pago|
          .card
            .float-left
              = pago.fecha
              %span.count (Contrato #{pago.medio_contrato.id} - #{pago.medio_contrato.medio.nombre})
            %strong.in-red.float-right #{pago.importe} €
